<!--
	<H3>Agente Periodico</H3>
-->
<agent xmlns="http://jadex.sourceforge.net/jadex"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://jadex.sourceforge.net/jadex
	                    http://jadex.sourceforge.net/jadex-0.96.xsd"
	   name="Periodico"
	   package="ontologia.acciones">

	<imports>
		<import>jadex.runtime.*</import>
		<import>jadex.planlib.*</import>
		<import>jadex.util.*</import>
		<import>jadex.adapter.fipa.*</import>
		<import>java.util.logging.*</import>
		<import>java.util.*</import>
		<import>jadex.model.IMMessageEvent</import>
	</imports>
	<beliefs>
		<belief name="ocupado_periodico" class="Boolean">
			<fact> new Boolean(false)</fact>
		</belief>

		<belief name="tiempo_periodico" class="int" updaterate="100">
			<fact> (int) (System.currentTimeMillis()/1000) </fact>
		</belief>

		<belief name="tiempo_fin_periodico" class="int">
			<fact> (int) 0 </fact>
		</belief>

		<belief name="mensaje_leer_periodico" class="IMessageEvent"/>

	</beliefs>
	<goals>
		<maintaingoal name="tiempo_superado">
			<maintaincondition>
				$beliefbase.tiempo_periodico >= $beliefbase.tiempo_fin_periodico
			</maintaincondition>
		</maintaingoal>
	</goals>
	<plans>
		<plan name="LeerPeriodicoPregunta">
			<body>new LeerPeriodicoPreguntaPlan()</body>
			<trigger>
				<messageevent ref="leer_periodico"/>
			</trigger>
		</plan>

		<plan name="LeerPeriodicoRespuesta">
			<body>new LeerPeriodicoRespuestaPlan()</body>
			<trigger>
				<goal ref="tiempo_superado"></goal>
			</trigger>
		</plan>

		<plan name="HacerCrucigrama">
			<body>new HacerCrucigramaPlan()</body>
			<trigger>
				<messageevent ref="hacer_crucigrama"/>
			</trigger>
		</plan>

	</plans>
	<events>
		<messageevent name="leer_periodico" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
			<parameter name="content" class="LeerPeriodico"
					   direction="fixed">
			</parameter>

		</messageevent>

		<messageevent name="hacer_crucigrama" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
			<parameter name="content" class="HacerCrucigrama"
					   direction="fixed">
			</parameter>

		</messageevent>

		<messageevent name="periodico_ocupado" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>jadex.bridge.fipa.SFipa.REFUSE</value>
			</parameter>
		</messageevent>

		<messageevent name="periodico_no_ocupado" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>jadex.bridge.fipa.SFipa.AGREE</value>
			</parameter>
		</messageevent>

		<messageevent name="has_leido_periodico" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>jadex.bridge.fipa.SFipa.INFORM</value>
			</parameter>
		</messageevent>

		<messageevent name="has_hecho_crucigrama" direction="send" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>jadex.bridge.fipa.SFipa.INFORM</value>
			</parameter>
		</messageevent>

	</events>

	<configurations>
		<configuration name="default">
			<goals>
				<initialgoal ref="tiempo_superado"/>
			</goals>
		</configuration>

	</configurations>

</agent>